<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="forgot-password-header">
      <mat-icon class="header-icon">lock_reset</mat-icon>
      <h1 class="forgot-password-title">Recuperar Senha</h1>
      <p class="forgot-password-subtitle" *ngIf="!emailSent">
        Digite seu email para receber as instrucoes de recuperacao de senha.
      </p>
    </div>

    <!-- Formulario de recuperacao -->
    <form *ngIf="!emailSent" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
      <!-- Email Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput
               type="email"
               formControlName="email"
               placeholder="seu@email.com"
               autocomplete="email">
        <mat-icon matSuffix>email</mat-icon>
        <mat-error *ngIf="email?.invalid && email?.touched">
          <span *ngIf="email?.errors?.['required']">Email e obrigatorio</span>
          <span *ngIf="email?.errors?.['email']">Email invalido</span>
        </mat-error>
      </mat-form-field>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage">
        <mat-icon>error</mat-icon>
        <span>{{ errorMessage }}</span>
      </div>

      <!-- Submit Button -->
      <button mat-raised-button
              color="primary"
              type="submit"
              class="submit-button full-width"
              [disabled]="isLoading">
        <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
        <span *ngIf="!isLoading">Enviar Email de Recuperacao</span>
      </button>
    </form>

    <!-- Sucesso - Email enviado -->
    <div *ngIf="emailSent" class="success-container">
      <mat-icon class="success-icon">mark_email_read</mat-icon>
      <h2 class="success-title">Email Enviado!</h2>
      <p class="success-message">{{ successMessage }}</p>
      <p class="success-instructions">
        Verifique sua caixa de entrada e spam. O link de recuperacao expira em 1 hora.
      </p>
      <button mat-raised-button
              color="primary"
              (click)="goToLogin()"
              class="back-button">
        Voltar para o Login
      </button>
    </div>

    <!-- Links -->
    <div class="forgot-password-links" *ngIf="!emailSent">
      <a routerLink="/auth/login" class="link">Voltar para o Login</a>
      <span class="separator">|</span>
      <a routerLink="/auth/register" class="link">Criar uma conta</a>
    </div>
  </div>
</div>
